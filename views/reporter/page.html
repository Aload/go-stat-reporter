<!doctype html>
<html lang="en">
<head>
    <title>【数据统计系统】</title>
{{template "meta.html" .}}
</head>
<body>
<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
    {{template "header.html" .}}
    <main class="mdl-layout__content">
        {{range $key, $table := .Page.DataTables}}
            <div class="mdl-grid demo-content">
                <h5 class="mdl-cell">{{$table.Name}}</h5>
                <div class=" mdl-shadow--2dp mdl-color--white mdl-cell mdl-cell--12-col">
                    <table id="dynamic-table-{{$table.Id}}" class="mdl-data-table dataTable" style="width: 100%;" role="grid">
                        <thead>
                        <tr>{{ range $table.LabelArray }}
                            <th>{{.}}</th>
                        {{ end }}
                        </tr>
                        </thead>
                    </table>
                </div>
            </div>
        {{end}}
    </main>
</div>
</body>
{{template "footer.html" .}}
<script type="application/javascript">
    jQuery(function($) {
        {{range $key, $table := .Page.DataTables}}
        var {{rawJs $table.Id}};
        $('#dynamic-table-{{$table.Id}}').DataTable( {
            "bFilter": false,
            "ordering": true,
            "processing": true,
            "serverSide": true,
            "lengthMenu": [[20, 30, 50, 100,1000, -1], [20, 30, 50, 100,1000, "All"]],
            "language": {"url": "/static/js/datatables.Chinese.json"},
            "ajax": "/admin/table/api?tableId={{$table.Id}}",
            "columns": [
            {{ range $table.ColumnArray }}
                { "data": "{{ . }}" },
            {{ end }}
            ]
        });
        {{end}}
    })
</script>

</html>
